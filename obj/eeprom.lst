   1               		.file	"eeprom.c"
   2               		.arch atmega16
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  17               	.Ltext0:
  18               		.data
  19               	.LC0:
  20 0000 6565 7072 		.string	"eeprom not ready\n\r"
  20      6F6D 206E 
  20      6F74 2072 
  20      6561 6479 
  20      0A0D 00
  21               		.text
  22               	.global	eeprom_ok
  24               	eeprom_ok:
  25               	.LFB10:
  26               	.LM1:
  27               	/* prologue: frame size=0 */
  28               	/* prologue end (size=0) */
  29               	.LM2:
  30 0000 E199      		sbic 60-0x20,1
  31 0002 03C0      		rjmp .L2
  32               	.LM3:
  33 0004 81E0      		ldi r24,lo8(1)
  34 0006 90E0      		ldi r25,hi8(1)
  35 0008 0895      		ret
  36               	.L2:
  37               	.LM4:
  38 000a 80E0      		ldi r24,lo8(.LC0)
  39 000c 90E0      		ldi r25,hi8(.LC0)
  40 000e 0E94 0000 		call sendstring
  41               	.LM5:
  42 0012 80E0      		ldi r24,lo8(0)
  43 0014 90E0      		ldi r25,hi8(0)
  44               	.LM6:
  45 0016 0895      		ret
  46               	/* epilogue: frame size=0 */
  47               	/* epilogue: noreturn */
  48               	/* epilogue end (size=0) */
  49               	/* function eeprom_ok size 12 (12) */
  50               	.LFE10:
  52               	.global	play_eeprom
  54               	play_eeprom:
  55               	.LFB11:
  56               	.LM7:
  57               	/* prologue: frame size=0 */
  58 0018 1F93      		push r17
  59 001a CF93      		push r28
  60 001c DF93      		push r29
  61               	/* prologue end (size=3) */
  62               	.LM8:
  63 001e C0E0      		ldi r28,lo8(eepromdata)
  64 0020 D0E0      		ldi r29,hi8(eepromdata)
  65               	.LM9:
  66 0022 0E94 0000 		call eeprom_ok
  67               	.L5:
  68               	.LM10:
  69 0026 E199      		sbic 60-0x20,1
  70 0028 FECF      		rjmp .L5
  71 002a 13E1      		ldi r17,lo8(19)
  72               	.L18:
  73               	.LBB2:
  74               	.LM11:
  75 002c E0E0      		ldi r30,lo8(leds)
  76 002e F0E0      		ldi r31,hi8(leds)
  77               	.LBB3:
  78               	.LBB4:
  79               	.LM12:
  80 0030 88E1      		ldi r24,lo8(24)
  81               	.LM13:
  82 0032 DE01      		movw r26,r28
  83               	/* #APP */
  84 0034 182E      		mov __zero_reg__,r24
  85 0036 0E94 0000 		call __eeprom_read_block_1C1D1E
  86               	/* #NOAPP */
  87               	.LBE4:
  88               	.LBE3:
  89               	.LBE2:
  90               	.LM14:
  91 003a 6896      		adiw r28,24
  92               	.LM15:
  93 003c 84E6      		ldi r24,lo8(100)
  94 003e 90E0      		ldi r25,hi8(100)
  95 0040 0E94 0000 		call delay_ms
  96               	.LM16:
  97 0044 1150      		subi r17,lo8(-(-1))
  98 0046 17FF      		sbrs r17,7
  99 0048 F1CF      		rjmp .L18
 100               	/* epilogue: frame size=0 */
 101 004a DF91      		pop r29
 102 004c CF91      		pop r28
 103 004e 1F91      		pop r17
 104 0050 0895      		ret
 105               	/* epilogue end (size=4) */
 106               	/* function play_eeprom size 30 (23) */
 107               	.LFE11:
 109               		.data
 110               	.LC1:
 111 0013 7072 6F67 		.string	"prog. eeprom(exit with x)\n\r"
 111      2E20 6565 
 111      7072 6F6D 
 111      2865 7869 
 111      7420 7769 
 112               		.text
 113               	.global	record_eeprom
 115               	record_eeprom:
 116               	.LFB12:
 117               	.LM17:
 118               	/* prologue: frame size=0 */
 119 0052 BF92      		push r11
 120 0054 CF92      		push r12
 121 0056 DF92      		push r13
 122 0058 EF92      		push r14
 123 005a FF92      		push r15
 124 005c 0F93      		push r16
 125 005e 1F93      		push r17
 126 0060 CF93      		push r28
 127 0062 DF93      		push r29
 128               	/* prologue end (size=9) */
 129               	.LM18:
 130 0064 21E0      		ldi r18,lo8(1)
 131 0066 C22E      		mov r12,r18
 132               	.LM19:
 133 0068 C0E0      		ldi r28,lo8(eepromdata)
 134 006a D0E0      		ldi r29,hi8(eepromdata)
 135               	.LM20:
 136 006c 0E94 0000 		call eeprom_ok
 137               	.L22:
 138               	.LM21:
 139 0070 E199      		sbic 60-0x20,1
 140 0072 FECF      		rjmp .L22
 141               	.LM22:
 142 0074 80E0      		ldi r24,lo8(.LC1)
 143 0076 90E0      		ldi r25,hi8(.LC1)
 144 0078 0E94 0000 		call sendstring
 145               	.LM23:
 146 007c 81E0      		ldi r24,lo8(1)
 147 007e 0E94 0000 		call sendint
 148               	.LM24:
 149 0082 80E2      		ldi r24,lo8(32)
 150 0084 0E94 0000 		call sendchar
 151               	.LM25:
 152 0088 81E2      		ldi r24,lo8(33)
 153 008a 0E94 0000 		call sendchar
 154               	.L41:
 155               	.LM26:
 156 008e BB24      		clr r11
 157               	.LM27:
 158 0090 0E94 0000 		call recline
 159               	.LM28:
 160 0094 8091 0000 		lds r24,buffer
 161 0098 8837      		cpi r24,lo8(120)
 162 009a 09F4      		brne .+2
 163 009c 54C0      		rjmp .L21
 164 009e 8091 0000 		lds r24,buffer
 165 00a2 8835      		cpi r24,lo8(88)
 166 00a4 09F4      		brne .+2
 167 00a6 4FC0      		rjmp .L21
 168               	.LM29:
 169 00a8 C394      		inc r12
 170               	.LM30:
 171 00aa 84E1      		ldi r24,lo8(20)
 172 00ac 8C15      		cp r24,r12
 173 00ae 60F0      		brlo .L29
 174               	.LM31:
 175 00b0 8C2D      		mov r24,r12
 176 00b2 0E94 0000 		call sendint
 177               	.LM32:
 178 00b6 E9E0      		ldi r30,lo8(9)
 179 00b8 EC15      		cp r30,r12
 180 00ba 18F0      		brlo .L30
 181               	.LM33:
 182 00bc 80E2      		ldi r24,lo8(32)
 183 00be 0E94 0000 		call sendchar
 184               	.L30:
 185               	.LM34:
 186 00c2 81E2      		ldi r24,lo8(33)
 187 00c4 0E94 0000 		call sendchar
 188               	.L29:
 189               	.LM35:
 190 00c8 DD24      		clr r13
 191               	.LM36:
 192 00ca 20E0      		ldi r18,lo8(0)
 193 00cc 30E0      		ldi r19,hi8(0)
 194 00ce 8091 0000 		lds r24,buffer
 195 00d2 8823      		tst r24
 196 00d4 61F1      		breq .L32
 197 00d6 8091 0000 		lds r24,buffer+1
 198               	.L44:
 199 00da 8823      		tst r24
 200 00dc 41F1      		breq .L32
 201               	.LM37:
 202 00de 90E0      		ldi r25,lo8(buffer)
 203 00e0 E92E      		mov r14,r25
 204 00e2 90E0      		ldi r25,hi8(buffer)
 205 00e4 F92E      		mov r15,r25
 206 00e6 E20E      		add r14,r18
 207 00e8 F31E      		adc r15,r19
 208 00ea F701      		movw r30,r14
 209 00ec 8081      		ld r24,Z
 210 00ee 0E94 0000 		call hextoint
 211 00f2 082F      		mov r16,r24
 212 00f4 1127      		clr r17
 213 00f6 84E0      		ldi r24,4
 214 00f8 000F      	1:	lsl r16
 215 00fa 111F      		rol r17
 216 00fc 8A95      		dec r24
 217 00fe E1F7      		brne 1b
 218 0100 F701      		movw r30,r14
 219 0102 8181      		ldd r24,Z+1
 220 0104 0E94 0000 		call hextoint
 221 0108 080F      		add r16,r24
 222 010a 111D      		adc r17,__zero_reg__
 223 010c 8D2D      		mov r24,r13
 224 010e D394      		inc r13
 225 0110 B801      		movw r22,r16
 226 0112 0E94 0000 		call SetLed
 227               	.LM38:
 228 0116 F2E0      		ldi r31,lo8(2)
 229 0118 BF0E      		add r11,r31
 230 011a 2B2D      		mov r18,r11
 231 011c 3327      		clr r19
 232 011e F901      		movw r30,r18
 233 0120 E050      		subi r30,lo8(-(buffer))
 234 0122 F040      		sbci r31,hi8(-(buffer))
 235 0124 8081      		ld r24,Z
 236 0126 8823      		tst r24
 237 0128 11F0      		breq .L32
 238 012a 8181      		ldd r24,Z+1
 239 012c D6CF      		rjmp .L44
 240               	.L32:
 241               	.LBB5:
 242               	.LM39:
 243 012e E0E0      		ldi r30,lo8(leds)
 244 0130 F0E0      		ldi r31,hi8(leds)
 245               	.LBB6:
 246               	.LBB7:
 247               	.LM40:
 248 0132 88E1      		ldi r24,lo8(24)
 249               	.LM41:
 250 0134 DE01      		movw r26,r28
 251               	/* #APP */
 252 0136 182E      		mov __zero_reg__,r24
 253 0138 0E94 0000 		call __eeprom_write_block_1C1D1E
 254               	/* #NOAPP */
 255               	.LBE7:
 256               	.LBE6:
 257               	.LBE5:
 258               	.LM42:
 259 013c 6896      		adiw r28,24
 260 013e 84E1      		ldi r24,lo8(20)
 261 0140 8C15      		cp r24,r12
 262 0142 08F0      		brlo .+2
 263 0144 A4CF      		rjmp .L41
 264               	.L21:
 265               	/* epilogue: frame size=0 */
 266 0146 DF91      		pop r29
 267 0148 CF91      		pop r28
 268 014a 1F91      		pop r17
 269 014c 0F91      		pop r16
 270 014e FF90      		pop r15
 271 0150 EF90      		pop r14
 272 0152 DF90      		pop r13
 273 0154 CF90      		pop r12
 274 0156 BF90      		pop r11
 275 0158 0895      		ret
 276               	/* epilogue end (size=10) */
 277               	/* function record_eeprom size 133 (114) */
 278               	.LFE12:
 280               		.data
 281               	.LC2:
 282 002f 636C 6561 		.string	"clearing eeprom\n\r"
 282      7269 6E67 
 282      2065 6570 
 282      726F 6D0A 
 282      0D00 
 283               		.text
 284               	.global	clear_eeprom
 286               	clear_eeprom:
 287               	.LFB13:
 288               	.LM43:
 289               	/* prologue: frame size=0 */
 290 015a CF93      		push r28
 291 015c DF93      		push r29
 292               	/* prologue end (size=2) */
 293               	.LM44:
 294 015e C0E0      		ldi r28,lo8(eepromdata)
 295 0160 D0E0      		ldi r29,hi8(eepromdata)
 296               	.LM45:
 297 0162 80E0      		ldi r24,lo8(.LC2)
 298 0164 90E0      		ldi r25,hi8(.LC2)
 299 0166 0E94 0000 		call sendstring
 300               	.LM46:
 301 016a 0E94 0000 		call eeprom_ok
 302               	.L46:
 303               	.LM47:
 304 016e E199      		sbic 60-0x20,1
 305 0170 FECF      		rjmp .L46
 306 0172 20E0      		ldi r18,lo8(0)
 307 0174 8FED      		ldi r24,lo8(479)
 308 0176 91E0      		ldi r25,hi8(479)
 309               	.L53:
 310               	.LBB8:
 311               	.LBB9:
 312               	.LM48:
 313 0178 DE01      		movw r26,r28
 314               	/* #APP */
 315 017a 022E      		mov __tmp_reg__,r18
 316 017c 0E94 0000 		call __eeprom_write_byte_1C1D1E
 317               	/* #NOAPP */
 318               	.LBE9:
 319               	.LBE8:
 320               	.LM49:
 321 0180 2196      		adiw r28,1
 322               	.LM50:
 323 0182 0197      		sbiw r24,1
 324 0184 97FF      		sbrs r25,7
 325 0186 F8CF      		rjmp .L53
 326               	.LM51:
 327 0188 C0E0      		ldi r28,lo8(laststate)
 328 018a D0E0      		ldi r29,hi8(laststate)
 329 018c 20E0      		ldi r18,lo8(0)
 330 018e 87E1      		ldi r24,lo8(23)
 331 0190 90E0      		ldi r25,hi8(23)
 332               	.L58:
 333               	.LBB10:
 334               	.LBB11:
 335               	.LM52:
 336 0192 DE01      		movw r26,r28
 337               	/* #APP */
 338 0194 022E      		mov __tmp_reg__,r18
 339 0196 0E94 0000 		call __eeprom_write_byte_1C1D1E
 340               	/* #NOAPP */
 341               	.LBE11:
 342               	.LBE10:
 343               	.LM53:
 344 019a 2196      		adiw r28,1
 345               	.LM54:
 346 019c 0197      		sbiw r24,1
 347 019e 97FF      		sbrs r25,7
 348 01a0 F8CF      		rjmp .L58
 349               	/* epilogue: frame size=0 */
 350 01a2 DF91      		pop r29
 351 01a4 CF91      		pop r28
 352 01a6 0895      		ret
 353               	/* epilogue end (size=3) */
 354               	/* function clear_eeprom size 41 (36) */
 355               	.LFE13:
 357               	.global	random_eeprom
 359               	random_eeprom:
 360               	.LFB14:
 361               	.LM55:
 362               	/* prologue: frame size=24 */
 363 01a8 CF92      		push r12
 364 01aa DF92      		push r13
 365 01ac EF92      		push r14
 366 01ae FF92      		push r15
 367 01b0 0F93      		push r16
 368 01b2 1F93      		push r17
 369 01b4 CF93      		push r28
 370 01b6 DF93      		push r29
 371 01b8 CDB7      		in r28,__SP_L__
 372 01ba DEB7      		in r29,__SP_H__
 373 01bc 6897      		sbiw r28,24
 374 01be 0FB6      		in __tmp_reg__,__SREG__
 375 01c0 F894      		cli
 376 01c2 DEBF      		out __SP_H__,r29
 377 01c4 0FBE      		out __SREG__,__tmp_reg__
 378 01c6 CDBF      		out __SP_L__,r28
 379               	/* prologue end (size=16) */
 380               	.LM56:
 381 01c8 CC24      		clr r12
 382 01ca DD24      		clr r13
 383               	.LM57:
 384 01cc 30E0      		ldi r19,lo8(eepromdata)
 385 01ce E32E      		mov r14,r19
 386 01d0 30E0      		ldi r19,hi8(eepromdata)
 387 01d2 F32E      		mov r15,r19
 388               	.LM58:
 389 01d4 80E8      		ldi r24,lo8(128)
 390 01d6 90E0      		ldi r25,hi8(128)
 391 01d8 0E94 0000 		call srand
 392               	.L78:
 393               	.LM59:
 394 01dc 00E0      		ldi r16,lo8(0)
 395 01de 10E0      		ldi r17,hi8(0)
 396               	.L70:
 397               	.LM60:
 398 01e0 0E94 0000 		call rand
 399 01e4 BC01      		movw r22,r24
 400 01e6 802F      		mov r24,r16
 401 01e8 0E94 0000 		call SetLed
 402               	.LM61:
 403 01ec 0F5F      		subi r16,lo8(-(1))
 404 01ee 1F4F      		sbci r17,hi8(-(1))
 405 01f0 0831      		cpi r16,24
 406 01f2 1105      		cpc r17,__zero_reg__
 407 01f4 ACF3      		brlt .L70
 408               	.LM62:
 409 01f6 40E0      		ldi r20,lo8(leds)
 410 01f8 50E0      		ldi r21,hi8(leds)
 411 01fa 88E1      		ldi r24,lo8(24)
 412 01fc 9E01      		movw r18,r28
 413 01fe 2F5F      		subi r18,lo8(-(1))
 414 0200 3F4F      		sbci r19,hi8(-(1))
 415 0202 DA01      		movw r26,r20
 416 0204 F901      		movw r30,r18
 417 0206 982F      		mov r25,r24
 418 0208 0190      		ld __tmp_reg__,Z+
 419 020a 0D92      		st X+,__tmp_reg__
 420 020c 9A95      		dec r25
 421 020e E1F7      		brne .-8
 422               	.LBB12:
 423               	.LBB13:
 424               	.LBB14:
 425               	.LM63:
 426 0210 D701      		movw r26,r14
 427 0212 FA01      		movw r30,r20
 428               	/* #APP */
 429 0214 182E      		mov __zero_reg__,r24
 430 0216 0E94 0000 		call __eeprom_write_block_1C1D1E
 431               	/* #NOAPP */
 432               	.LBE14:
 433               	.LBE13:
 434               	.LBE12:
 435               	.LM64:
 436 021a 88E1      		ldi r24,lo8(24)
 437 021c 90E0      		ldi r25,hi8(24)
 438 021e E80E      		add r14,r24
 439 0220 F91E      		adc r15,r25
 440               	.LM65:
 441 0222 8AE0      		ldi r24,lo8(10)
 442 0224 90E0      		ldi r25,hi8(10)
 443 0226 0E94 0000 		call delay_ms
 444               	.LM66:
 445 022a 0894      		sec
 446 022c C11C      		adc r12,__zero_reg__
 447 022e D11C      		adc r13,__zero_reg__
 448 0230 94E1      		ldi r25,lo8(20)
 449 0232 C916      		cp r12,r25
 450 0234 D104      		cpc r13,__zero_reg__
 451 0236 94F2      		brlt .L78
 452               	/* epilogue: frame size=24 */
 453 0238 6896      		adiw r28,24
 454 023a 0FB6      		in __tmp_reg__,__SREG__
 455 023c F894      		cli
 456 023e DEBF      		out __SP_H__,r29
 457 0240 0FBE      		out __SREG__,__tmp_reg__
 458 0242 CDBF      		out __SP_L__,r28
 459 0244 DF91      		pop r29
 460 0246 CF91      		pop r28
 461 0248 1F91      		pop r17
 462 024a 0F91      		pop r16
 463 024c FF90      		pop r15
 464 024e EF90      		pop r14
 465 0250 DF90      		pop r13
 466 0252 CF90      		pop r12
 467 0254 0895      		ret
 468               	/* epilogue end (size=15) */
 469               	/* function random_eeprom size 88 (57) */
 470               	.LFE14:
 472               	.global	laststate
 473               		.section	.eeprom,"aw",@progbits
 476               	laststate:
 477 0000 0000 0000 		.skip 24,0
 477      0000 0000 
 477      0000 0000 
 477      0000 0000 
 477      0000 0000 
 478               		.comm idle_anim,4,1
 479               		.comm anim_leds,48,1
 480               		.comm anim_leds_dir,48,1
 483               	eepromdata:
 484 0018 0000 0000 		.skip 480,0
 484      0000 0000 
 484      0000 0000 
 484      0000 0000 
 484      0000 0000 
 485               		.text
 486               	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 eeprom.c
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:3      *ABS*:0000003f __SREG__
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:4      *ABS*:0000003e __SP_H__
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:5      *ABS*:0000003d __SP_L__
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:6      *ABS*:00000000 __tmp_reg__
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:7      *ABS*:00000001 __zero_reg__
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:24     .text:00000000 eeprom_ok
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:54     .text:00000018 play_eeprom
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:483    .eeprom:00000018 eepromdata
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:115    .text:00000052 record_eeprom
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:286    .text:0000015a clear_eeprom
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:476    .eeprom:00000000 laststate
C:\DOKUME~1\aw\LOKALE~1\Temp/cc02aaaa.s:359    .text:000001a8 random_eeprom
                            *COM*:00000004 idle_anim
                            *COM*:00000030 anim_leds
                            *COM*:00000030 anim_leds_dir

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
sendstring
leds
__eeprom_read_block_1C1D1E
delay_ms
sendint
sendchar
recline
buffer
hextoint
SetLed
__eeprom_write_block_1C1D1E
__eeprom_write_byte_1C1D1E
srand
rand
